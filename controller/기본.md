### Controller 란

Controller란 pod 개수를 보장하기 위한 시스템이다.

<img width="649" alt="image" src="https://github.com/sm55555/k8s/assets/38831314/6657ca7b-f705-4ddb-a98c-5a52c3e1ffcc">

Controller 종류에는 아래와 같이 나와있다.

<img width="599" alt="image" src="https://github.com/sm55555/k8s/assets/38831314/d188e6fe-30d1-4a2e-9481-1d51d08f060a">

### ReplicationController

요구하는 pod의 개수를 보장하며 pod 집합의 실행을 항상 안정적으로 유지하는 것을 목표
  - 요구하는 pod의 개수가 부족하면 template를 이용해 pod를 추가
  - 요구하는 pdod 수 보다 많으면 최근에 생성된 pod를 삭제

기본 구성
  - selector
  - replicas
  - template

```
apiVersion: v1
kind: ReplicationController
metadata:
  name [ReplicationController]
spec:
  replicas: 3
  selector:
    key: value
  template:
    [컨테이너 템플릿]
```

### ReplicaSet

ReplicationController 와 같은 역할을 하는 컨트롤러
ReplicationController 보다 풍부한 selector

```yaml
selector:
  matchLabels:
    component: redis
  matchExpressions:
    - {key: tier, operator: In, values: [cache]}
    - {key: enviroment, operator: NotIn, values: [dev]}
```

matchExpressions 연산자

```
In : key와 values를 지정하여 key, value가 일치하는 pod만 연결
NotIn : key는 일치하고 value는 일치하지 않는 pod에 연결
Exists : key에 맞는 label의 pod를 연결
DoesNotExist : key와 다른 label의 pod를 연결
```





